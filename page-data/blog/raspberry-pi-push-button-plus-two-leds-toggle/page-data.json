{"componentChunkName":"component---src-templates-blog-js","path":"/blog/raspberry-pi-push-button-plus-two-leds-toggle/","result":{"data":{"markdownRemark":{"html":"<center>Got another simple project here for you!</center>\n<br />\n<p>This project is about adding an additional LED light to the\n<a href=\"/blog/raspberry-pi-push-button-plus-one-led/\">Raspberry Pi: Push-button + One(1) LED</a> post, and having the push-button\ntoggle the LED lights. I used one red and one blue LED.</p>\n<p>The desired result, toggle on/off of the two LEDs with the push of a button; if the red light is on then the blue is\noff, and vice versa.</p>\n<center>Let's see how this goes...</center>\n<!--more-->\n<br />\n<p>With this project, I learned I need to have a better understanding around detecting events with the GPIO. I found myself\nmodifying “bouncetime” to achieve the desired result, but it is not optimal.</p>\n<p>With the code below, there are times when the lights do not toggle or the light remains on.</p>\n<p>Any ideas what I am doing wrong? Let me know in the comment section below.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\">#!/usr/bin/env python</span>\n\n<span class=\"token keyword\">import</span> RPi<span class=\"token punctuation\">.</span>GPIO <span class=\"token keyword\">as</span> GPIO\n<span class=\"token keyword\">import</span> time\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">on_callback</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    GPIO<span class=\"token punctuation\">.</span>output<span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">,</span> GPIO<span class=\"token punctuation\">.</span><span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">def</span> <span class=\"token function\">off_callback</span><span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    GPIO<span class=\"token punctuation\">.</span>output<span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">,</span> <span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n\nGPIO<span class=\"token punctuation\">.</span>setmode<span class=\"token punctuation\">(</span>GPIO<span class=\"token punctuation\">.</span>BCM<span class=\"token punctuation\">)</span>\nRED_LED <span class=\"token operator\">=</span> <span class=\"token number\">25</span>\nBLUE_LED <span class=\"token operator\">=</span> <span class=\"token number\">24</span>\nSWITCH_IN <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\nGPIO<span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">(</span>SWITCH_IN<span class=\"token punctuation\">,</span> GPIO<span class=\"token punctuation\">.</span>IN<span class=\"token punctuation\">,</span> pull_up_down<span class=\"token operator\">=</span>GPIO<span class=\"token punctuation\">.</span>PUD_DOWN<span class=\"token punctuation\">)</span>\nGPIO<span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">(</span>RED_LED<span class=\"token punctuation\">,</span> GPIO<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">,</span> initial<span class=\"token operator\">=</span>GPIO<span class=\"token punctuation\">.</span>LOW<span class=\"token punctuation\">)</span>\nGPIO<span class=\"token punctuation\">.</span>setup<span class=\"token punctuation\">(</span>BLUE_LED<span class=\"token punctuation\">,</span> GPIO<span class=\"token punctuation\">.</span>OUT<span class=\"token punctuation\">,</span> initial<span class=\"token operator\">=</span>GPIO<span class=\"token punctuation\">.</span>LOW<span class=\"token punctuation\">)</span>\nGPIO<span class=\"token punctuation\">.</span>add_event_detect<span class=\"token punctuation\">(</span>SWITCH_IN<span class=\"token punctuation\">,</span> GPIO<span class=\"token punctuation\">.</span>RISING<span class=\"token punctuation\">,</span> bouncetime<span class=\"token operator\">=</span><span class=\"token number\">900</span><span class=\"token punctuation\">)</span>\n\n\nled <span class=\"token operator\">=</span> BLUE_LED\nnled <span class=\"token operator\">=</span> RED_LED\nrun <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>run <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n        <span class=\"token keyword\">if</span> GPIO<span class=\"token punctuation\">.</span>event_detected<span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">print</span> led\n            led <span class=\"token operator\">=</span> BLUE_LED <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>led <span class=\"token operator\">==</span> RED_LED<span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> RED_LED\n            nled <span class=\"token operator\">=</span> RED_LED <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nled <span class=\"token operator\">==</span> BLUE_LED<span class=\"token punctuation\">)</span> <span class=\"token keyword\">else</span> BLUE_LED\n\n            on_callback<span class=\"token punctuation\">(</span>led<span class=\"token punctuation\">)</span>\n            off_callback<span class=\"token punctuation\">(</span>nled<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">pass</span>\n    <span class=\"token keyword\">except</span> KeyboardInterrupt<span class=\"token punctuation\">:</span>\n        run <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n        GPIO<span class=\"token punctuation\">.</span>cleanup<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">print</span> <span class=\"token string\">'KeyboardInterrupt caught'</span>\n        <span class=\"token keyword\">break</span>\nGPIO<span class=\"token punctuation\">.</span>cleanup<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span> <span class=\"token string\">'EXITED!'</span></code></pre></div>\n<p>Also available here, <a href=\"https://github.com/xpros/raspberry-pi-examples/blob/master/raspi-push-button-led-toggle/raspi-push-button-led-toggle.py\">raspi-push-button-led-toggle</a>.</p>\n<p><div class=\"gatsby-resp-iframe-wrapper\" style=\"padding-bottom: 56.42857142857143%; position: relative; height: 0; overflow: hidden; margin-bottom: 1.0725rem\" > <div class=\"embedVideo-container\"> <iframe src=\"https://www.youtube.com/embed/kNPYPkmSMdI?rel=0\" class=\"embedVideo-iframe\" style=\"border:0; position: absolute; top: 0; left: 0; width: 100%; height: 100%; \" allowfullscreen></iframe> </div> </div></p>","tableOfContents":"","timeToRead":1,"fields":{"slug":"/blog/raspberry-pi-push-button-plus-two-leds-toggle/"},"frontmatter":{"author":null,"categories":["raspberry pi"],"created":"2013-08-07","description":null,"feature":false,"image":"raspberry-pi-push-button-plus-two-leds-toggle-original.jpg","show":true,"tags":["raspberry pi"],"title":"Raspberry Pi: Push-button + Two(2) LEDs that Toggle","updated":"2020-04-26"},"parent":{"__typename":"File","sourceInstanceName":"blog"}}},"pageContext":{"slug":"/blog/raspberry-pi-push-button-plus-two-leds-toggle/","previous":{"node":{"fields":{"slug":"/blog/raspberry-pi-push-button-plus-one-led/"},"excerpt":"<p>This was my first attempt at getting a push-button to turn on an LED light with my Raspberry Pi w/Pi Cobbler setup.</p>\n<p>I had\na lot of fun putting the bits and pieces together, and I hope you enjoy reading about it!</p>\n","frontmatter":{"categories":["raspberry pi"],"image":"raspberry-pi-push-button-plus-one-led-original.jpg","tags":["raspberry pi"],"title":"Raspberry Pi: Push-button + One(1) LED"}}},"next":{"node":{"fields":{"slug":"/blog/hello-world/"},"excerpt":"<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token comment\"># Bash</span>\n$ <span class=\"token assign-left variable\">WORLD</span><span class=\"token operator\">=</span><span class=\"token string\">'World'</span>\n$ <span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"Hello, <span class=\"token variable\">${WORLD}</span>\"</span>\nHello, World</code></pre></div>\n<br />\n<center><code class=\"language-text\">This</code> is officially the first post! How <b>exciting</b>!</center>\n<center>Let me start things off by describing the idea behind the creation of Prompt Fu.</center>\n","frontmatter":{"categories":["web"],"image":"astronomy-cosmic-cosmos.jpg","tags":["promptfu","web"],"title":"Hello, World"}}}}},"staticQueryHashes":["1245490772","1673447228","1673447228","2742190585","3424645583","3813927108","3813927108","4171525417"]}